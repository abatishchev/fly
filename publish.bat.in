rem Copyright (C) 2007-2008 Alexander M. Batishchev aka Godfather (abatishchev at gmail.com)

set PATH=%PATH%;%PROGRAMFILES%\WinRar;%PROGRAMFILES%\PuTTY

set CMD=A -afzip -o+ -s -ibck -t

set PROJECT-LIB=libfly
set PROJECT-BIN=fly

set FILES=Compiler.cs Errors.cs Events.cs Output.cs Settings.cs Properties\AssemblyInfo.cs
set FILES-LIB=%PROJECT-LIB%.csproj
set FILES-BIN=%PROJECT-BIN%.csproj Core.cs Program.cs SettingsParser.cs fly.xml Examples\*.*
set DOCS=CHANGELOG.txt LICENSE.txt

set LIB=bin\Release\libfly.dll
set BINARY=bin\Release\fly.exe

set BUILD=2
set VERSION=2.0.%BUILD%

set BATCH=batch.txt
del %BATCH%
echo cd uploads >> %BATCH%

set NAME=%PROJECT-LIB%-%VERSION%.$WCREV$-source.zip
call winrar.exe %CMD% %NAME% %FILES% %FILES-LIB% %DOCS%
echo put %NAME% >> %BATCH%

set NAME=%PROJECT-LIB%-%VERSION%.$WCREV$-binary.zip
call winrar.exe -ep %CMD% %NAME% %LIB%
echo put %NAME% >> %BATCH%

set NAME=%PROJECT-BIN%-%VERSION%.$WCREV$-source.zip
call winrar.exe %CMD% %NAME% %FILES% %FILES-BIN% %DOCS%
echo put %NAME% >> %BATCH%

set NAME=%PROJECT-BIN%-%VERSION%.$WCREV$-binary.zip
call winrar.exe -ep %CMD% %NAME% %BIN%
echo put %NAME% >> %BATCH%

call psftp.exe -b %BATCH% abatishchev@frs.sourceforge.net

del %BATCH%

set DIST=..\..\release

mkdir %DIST%
move /y %PROJECT-LIB%-%VERSION%.$WCREV$-source.zip %DIST%
move /y %PROJECT-LIB%-%VERSION%.$WCREV$-binary.zip %DIST%
move /y %PROJECT-BIN%.$WCREV$-source.zip %DIST%
move /y %PROJECT-BIN%.$WCREV$-binary.zip %DIST%
